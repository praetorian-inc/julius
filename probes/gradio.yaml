# probes/gradio.yaml
# Reference: https://www.gradio.app/docs/gradio/blocks#blocks-api-page
name: gradio
description: Gradio ML demo interfaces
category: self-hosted
port_hint: 7860
specificity: 75
api_docs: https://www.gradio.app/docs/

requests:
  # Gradio config endpoint has specific structure
  - type: http
    path: /config
    method: GET
    match:
      - type: status
        value: 200
      - type: content-type
        value: application/json
      - type: body.contains
        value: '"mode"'
      - type: body.contains
        value: '"components"'

  # Gradio HTML page contains gradio-app element
  - type: http
    path: /
    method: GET
    match:
      - type: status
        value: 200
      - type: body.contains
        value: "gradio-app"

  # Gradio API endpoint has named_endpoints
  - type: http
    path: /api/
    method: GET
    match:
      - type: status
        value: 200
      - type: content-type
        value: application/json
      - type: body.contains
        value: '"named_endpoints"'
