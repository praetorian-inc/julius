# probes/huggingface-tgi.yaml
name: huggingface-tgi
description: HuggingFace Text Generation Inference
category: self-hosted
port_hint: 3000
specificity: 75
api_docs: https://huggingface.co/docs/text-generation-inference/

requests:
  - type: http
    path: /info
    method: GET
    match:
      - type: status
        value: 200
      - type: body.contains
        value: '"model_id":'

models:
  path: /info
  method: GET
  extract: "[.model_id]"

augustus:
  generator: rest
  config_template:
    endpoint: "$TARGET/generate"
    method: POST
    headers:
      Content-Type: application/json
    body: '{"inputs": "$PROMPT", "parameters": {"max_new_tokens": 512}}'
    response_path: "generated_text"
